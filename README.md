# Suno AI 插件使用文档

## 功能介绍

Suno AI 插件是一个基于 Vector Engine API 的 AI 歌曲生成插件，支持生成原创歌曲、纯音乐，并提供完整的歌曲信息（包括封面、歌词、音频文件）。

## 配置说明

### 配置文件位置

插件配置文件位于 `plugins/suno_ai/config.toml`

### 配置项说明

```toml
[api]
# API 基础地址，默认使用 Vector Engine API
api_base = "https://api.vectorengine.ai"
# API 密钥，必填
api_key = "your_api_key_here"
# 模型版本，支持 chirp-v3-0, chirp-v3-5, chirp-v4, chirp-auk, chirp-v5
model = "chirp-v4"

[accounts]
# 默认使用的账户名称
default_account = "default"
# 账户列表，格式：账户名1:cookie1|账户名2:cookie2
accounts_list = "default:your_cookie_here"
```

## 使用方法

### 生成歌曲

**命令格式：**
- `#作曲 <歌曲描述>`
- `/suno <歌曲描述>`
- `/suno 作曲 <歌曲描述>`

**示例：**
```
#作曲 一首关于爱情的流行歌曲
/suno 一首轻快的纯音乐
/suno 作曲 古风歌曲，带有中国传统乐器
```

### 查看账户余额

**命令格式：**
- `/suno余额`
- `/suno 余额`

**示例：**
```
/suno余额
```

### 查看历史记录

**命令格式：**
- `/suno历史`
- `/suno 历史`

**示例：**
```
/suno历史
```

## 功能特性

1. **多模型支持**：支持多种 Suno AI 模型，包括最新的 chirp-v5
2. **灵活的音乐类型**：支持生成带歌词的歌曲和纯音乐
3. **完整的资源整合**：生成的歌曲包含封面图片、歌词和音频文件
4. **多种发送方式**：
   - 文本信息和图片合并转发
   - 音频文件直接发送或转换为语音发送
   - 支持多种发送方式的自动降级
5. **友好的用户体验**：清晰的状态提示和结果展示

## 工作流程

1. 用户发送歌曲生成命令
2. 插件调用 Vector Engine API 生成歌曲
3. 轮询查询生成状态
4. 生成完成后：
   - 合并文本信息和封面图片发送转发消息
   - 发送音频文件或语音
5. 清理临时文件

## 常见问题

### Q: 生成歌曲失败怎么办？
A: 请检查：
   - API 密钥是否正确配置
   - API 地址是否可访问
   - 网络连接是否正常
   - 查看日志获取详细错误信息

### Q: 为什么没有收到音频文件？
A: 插件会自动尝试多种发送方式：
   1. 首先尝试 `send_file` 方法直接发送文件
   2. 如果失败，尝试使用 `send_voice` 方法发送语音
   3. 如果都失败，回退到发送歌曲链接

### Q: 可以生成多长的歌曲？
A: 歌曲长度由 Suno AI 模型决定，一般在 1-2 分钟左右。

## 日志说明

插件日志使用 `suno_ai` 作为 logger 名称，可以通过配置日志系统查看详细日志信息。

## 更新日志

### 2026-01-19
- 优化图片发送逻辑，添加 `send_image` 方法支持
- 简化 MP3 文件发送逻辑，提高代码可读性
- 美化消息输出，添加代码高亮格式
- 将图片合并到转发消息中，提高消息整合性
- 支持多种发送方式的自动降级

### 2026-01-18
- 初始版本发布
- 支持歌曲生成功能
- 支持账户余额查询
- 支持历史记录查询

## 技术支持

如果遇到问题，可以查看日志获取详细错误信息，或联系插件开发者获取支持。

## 许可协议

本插件遵循 MIT 许可协议。
